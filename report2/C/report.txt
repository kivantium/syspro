read(2)/write(2)を使って551427 byteの画像ファイルをコピーする場合の実行時間は
バッファサイズ1: 758954 us
バッファサイズ8192: 679 us
であった。(プログラムはmain.c)

fread(3)/fwrite(3)を使った場合の実行時間は
バッファサイズ1: 38163 us
バッファサイズ8192: 1900 us
であった。(プログラムはmain2.c)

fread(3)/fwrite(3)版でstraceを用いてwriteシステムコールが呼ばれる回数を調べたところ、バッファサイズ8192のときに135回、バッファサイズ1のときに136回だったのでライブラリ側でキャッシュを保持しておりキャッシュが尽きるまではシステムコールを呼ばないことが分かる。時間の差はループ処理や関数呼び出しのコストの差であろう。
read(2)/write(2)版ではバッファサイズ8192のときに69回、バッファサイズ1のときに551428回呼ばれており、当然ながらキャッシュすることなくそのままシステムコールを呼んでいることが分かり、これが速度差の原因となっている。

